<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<style>
    #particles-js canvas {
        position: absolute;
        height: 600px !important;
        transform: translateY(-265px);
    }

    :root {
        width: 799px;
        height: 600px;
        display: grid;
        place-items: center;
        overflow: hidden;
    }

    #form {
        border-width: 1px;
        padding: 30px;
        background-color: rgba(255, 255, 255, 0.7);
    }

    #filelist {
        border: #1f1f1f solid;
        border-width: 1px;
        padding: 20px;
        margin: 20px;
    }

    .bgimage {
        object-fit: cover;
        position: fixed;
        opacity: 0.7;
        height: 265px;
        /* position: absolute; */
    }

    .anotherform {
        /* position: absolute; */
    }

    .form {
        overflow: hidden;
    }
</style>
<link href="css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
<script src="js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
</script>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>

<body>
        <div class="bgimage"></div>
        <div class="form animate__animated animate__fadeIn" style="height:265px;">
        <div class="anotherform">
            <center id="form">
                <label class="file">
                    <input type="file" id="fileInput" multiple="multiple" size="60" onchange="print(this)" />
                    <span class="file-custom"></span>
                </label>
                <div id="filelist"></div>â–¼<br><br>
                <button type="submit" onclick="merge()" class="btn btn-outline-dark">Merge</button><br>
            </center>
        </div>
    </div>
    <img src="bg.png" width=774px>
</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    function print(file) {
        jQuery(document).ready(function () {
            const {
                PythonShell
            } = require('python-shell');
            var path = (file.files[0].path);
            let options = {
                mode: 'text',
                pythonPath: 'python',
                args: [path]
            };
            PythonShell.run('resources/app/thumbnail.py', options, function (err, results) {
                if (err) throw err;
                console.log(results);
                jQuery(".bgimage").empty();
                jQuery(".bgimage").prepend(
                    `<img src="${results[1]}" width=770px class="animate__animated animate__fadeIn">`
                );
                jQuery("#filelist").empty();
                jQuery("#filelist").prepend(results[0]);

            });
        });
    }

    function merge() {
        var text = ""
        for (var i = 0; i < $("#fileInput")[0].files.length; i++) {
            text += ($("#fileInput")[0].files[i].path) + ","
        }
        const {
            PythonShell
        } = require('python-shell');
        // var map = 
        // document.write(text);
        let options = {
            mode: 'text',
            pythonPath: 'python',
            args: [text]
        };
        PythonShell.run('resources/app/main.py', options, function (err, results) {
            if (err) throw err;
            // console.log(results);
        });

    }
</script>